# QuantDinger local configuration (copy to `.env` and edit)
# `run.py` will load `backend_api_python/.env` automatically if present.

# =========================
# Auth (local login)
# =========================
SECRET_KEY=quantdinger-secret-key-change-me
ADMIN_USER=quantdinger
ADMIN_PASSWORD=123456

# =========================
# Network / App
# =========================
PYTHON_API_HOST=0.0.0.0
PYTHON_API_PORT=5000
PYTHON_API_DEBUG=False

# =========================
# Database (SQLite / MySQL)
# =========================
# 数据库类型: sqlite 或 mysql
DB_TYPE=sqlite

# SQLite 配置 (DB_TYPE=sqlite 时使用)
# 主库文件路径（可选）
# - 不设置时，默认使用：backend_api_python/data/quantdinger.db
# - Docker 推荐：/app/data/quantdinger.db
SQLITE_DATABASE_FILE=

# MySQL 配置 (DB_TYPE=mysql 时使用)
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=quantdinger
MYSQL_PASSWORD=quantdinger123
MYSQL_DATABASE=quantdinger
MYSQL_CHARSET=utf8mb4

# Cookie
cookie = __Secure-3PSID=g.a0005AgBm4uhxe1X96tLiBRL7nrTyZAuQzGsQ5O0YC-tWVZXn57MO-JpD0qRNReXUMzuBt9AZAACgYKAdgSARYSFQHGX2MiNjM7-Mgh-SHD15Qm1U2G9hoVAUF8yKpb8BB83CUJ2jKulaotYopf0076; __Secure-3PAPISID=GMwe1mmR9JU05nbp/AtZyqOVDo0wk6QYZR; NID=527=h698r_UB96ghGIdP5tiP-4AtTT-Z8PTI8sLoMoe4q0uKSXOtSVvX1w29GpUHVcS83EygJxHoX7zAMi7eIXtSxwVNAc-a3x6com_91Pyz3MEOhPeZKjwqKVVsd8psY9JjRnaSvp0v11yG6FUSXE3SYY-KnxJxA8k5_ygHSg4J074Qlb_aJ9-N-pQFgcgygzgS8QRDHV-UP2IJbZBOlan63BIc7RjBv6bfKtv2kXWIVLbbnOkV4eiWD4z4U_n6s2BfOu43BTG0JvUp54jpY1EjQLdvQd2nrNhiDbEuX3_GYA69h_zOzOyqrqGxUVSI87iij6tG1QpKATjNAmeVA3JZN2ya-JMo7-YBg9uUJSlnAM4rsd8OYLK_5I9wMXVHcmSuL9E6QspXJQ2IuQfeRyk2Ks6bsqr9M-Kyzhg_5TLj_CAC9RC3EAPiS6UqUKPwvTgwvYqCVdSCkoY4rR3fA8ixESFBymCXQrV7slRTTZr7ZTXx4svGqk_SDtscr5kEiM1jPN7UjSRpg-mCvbfvofs-0K8O_uo-3zHY8IA5W2FMh2h88dLX2nJ34MTmVHmmCEsZoOXYiaofK-L5evbf7RIrIwObtyFEE-JjPg1LpijwICIVVfjGpWucQFmzIWu42r28Qx34TPk8WcTg8FpR3ZoaRZstoyDpAqt1sxBLEQ-Jmog8kuxxfpQwUC_GfMKSWxmU-lAdcP99C2UUvKo0nFG6D4w9iSl5unFR2rlwSCBNN91mBqRE5WCjxCx9sPEaTGxIlvfSTajrlc-DxrXBHou77ygukPAZdzEVtNkOzeUu3w3MSRsorEHt56hnFmVtbgtChTxwxCOQN8WQ0bXt0NPSYQaQ5PtRi9Gt6imngsJsZC6q9EGIgc7MQdsiyIhmiJP56jq7uuPtdnCWpUVNTbsTBrO9GuxVXtM1wdidtVHJGUvxo1OEFHHuaL5YDLfLWv-2TFvAX8UccrfhwoRIiKsoC67TJ2g35PXNecpEHAJzHuqWiva0q4IHqrT4cbwxbTYkMbOO-AqoRbl9ZLGBykDJKdLMS_wpsFop8eJ6Eg; __Secure-3PSIDTS=sidts-CjIBflaCdT3CaiK-EuFkT9S1NMRsmt0uQc1hyzdgiEumVb9Irjl_GVtrjgPvM88FkIrRZRAA; __Secure-3PSIDCC=AKEyXzUDdFvl5ju7DozINaroZGfc0VUIsEiXHPyg_DbC4fdC-iC2grJ6TepC3Ga0Cz8DBgFG7w

# =========================
# TradingView Cookies (用于Selenium访问TradingView读取HAMA指标)
# =========================
# 从 https://cn.tradingview.com/ 获取cookies
# 详细说明请参考: TRADINGVIEW_COOKIES.md
TRADINGVIEW_SESSIONID=
TRADINGVIEW_SESSIONID_SIGN=
TRADINGVIEW_UID=


# =========================
# Pending orders worker (optional)
# =========================
# Paper mode default: disabled. If enabled, it will consume `pending_orders` and dispatch signals via webhook.
# Poll and dispatch orders from `pending_orders` (live/signal).
# Local mode default is enabled in code, but you can override here.
ENABLE_PENDING_ORDER_WORKER=true

# Reclaim orders stuck in status=processing after worker crashes (seconds).
PENDING_ORDER_STALE_SEC=90

# =========================
# Strategy signal notifications (optional)
# =========================
# The frontend stores per-strategy notification_config.targets.*, but you can also set
# a global fallback webhook URL used when a strategy enables "webhook" channel but
# doesn't provide targets.webhook.
SIGNAL_WEBHOOK_URL=
SIGNAL_WEBHOOK_TOKEN=

# HTTP timeout for outbound notification requests (seconds).
SIGNAL_NOTIFY_TIMEOUT_SEC=6

# Telegram (required if you enable telegram channel)
TELEGRAM_BOT_TOKEN=

# Email / SMTP (required if you enable email channel)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=
SMTP_USE_TLS=true
SMTP_USE_SSL=false

# =========================
# HAMA Email Notification (optional)
# =========================
# HAMA 邮件通知收件人（多个收件人用逗号分隔）
# 示例: user1@qq.com,user2@gmail.com
HAMA_EMAIL_RECIPIENTS=

# HAMA 邮件通知冷却时间（秒），避免频繁发送
# 默认 3600 秒 = 1小时，同一币种在冷却期内只发送一次邮件
HAMA_EMAIL_COOLDOWN=3600

# Phone / SMS (optional; Twilio REST, required if you enable phone channel)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_FROM_NUMBER=

# Restore strategies with status='running' on backend startup.
# Set to true to disable auto-restore.
DISABLE_RESTORE_RUNNING_STRATEGIES=false

# =========================
# Strategy execution loop (tick interval)
# =========================
# Default tick interval for strategy monitoring loop (seconds).
# The strategy thread will fetch current price and evaluate triggers once per tick.
STRATEGY_TICK_INTERVAL_SEC=10

# In-memory price cache TTL (seconds). Normally doesn't matter when tick interval is >= TTL.
PRICE_CACHE_TTL_SEC=10

# =========================
# Outbound Proxy (optional, recommended if your network blocks data providers)
# =========================
# If you use a local proxy (common ports: 7890/7891/10808), set PROXY_PORT only.
# Default scheme is socks5h and host is 127.0.0.1.
# For Docker deployment: set PROXY_HOST=host.docker.internal to access host's proxy
PROXY_PORT=7890
PROXY_HOST=127.0.0.1
PROXY_SCHEME=socks5h
PROXY_URL=

# You can also set standard variables directly (advanced):
# ALL_PROXY=socks5h://127.0.0.1:10808
# HTTP_PROXY=socks5h://127.0.0.1:10808
# HTTPS_PROXY=socks5h://127.0.0.1:10808

# Allow frontend dev server
CORS_ORIGINS=*

# Request rate limit (per minute)
RATE_LIMIT=100

ENABLE_CACHE=False
ENABLE_REQUEST_LOG=True
ENABLE_AI_ANALYSIS=True

# =========================
# Agent memory & reflection (optional)
# =========================
# Toggle agent memory usage in multi-agent analysis
ENABLE_AGENT_MEMORY=true

# Memory retrieval settings
AGENT_MEMORY_ENABLE_VECTOR=true
AGENT_MEMORY_EMBEDDING_DIM=256
AGENT_MEMORY_TOP_K=5
AGENT_MEMORY_CANDIDATE_LIMIT=500
AGENT_MEMORY_HALF_LIFE_DAYS=30
AGENT_MEMORY_W_SIM=0.75
AGENT_MEMORY_W_RECENCY=0.20
AGENT_MEMORY_W_RETURNS=0.05

# Automated verification loop (replaces cron)
ENABLE_REFLECTION_WORKER=false
REFLECTION_WORKER_INTERVAL_SEC=86400

# =========================
# OpenRouter / LLM
# =========================
OPENROUTER_API_KEY=
OPENROUTER_API_URL=https://openrouter.ai/api/v1/chat/completions
OPENROUTER_MODEL=openai/gpt-4o
OPENROUTER_TEMPERATURE=0.7
OPENROUTER_MAX_TOKENS=4000
OPENROUTER_TIMEOUT=300
OPENROUTER_CONNECT_TIMEOUT=30

# Optional: override model list shown in UI (JSON object: {"model_id":"Display Name", ...})
AI_MODELS_JSON={}

# =========================
# Market presets (optional)
# =========================
# Optional: override market types shown in UI (JSON array)
MARKET_TYPES_JSON=[]

# Optional: supported crypto symbols list (JSON array)
TRADING_SUPPORTED_SYMBOLS_JSON=[]

# =========================
# Data sources (Kline / pricing)
# =========================
DATA_SOURCE_TIMEOUT=30
DATA_SOURCE_RETRY=3
DATA_SOURCE_RETRY_BACKOFF=0.5

# Finnhub (US stocks / forex helpers depending on implementation)
FINNHUB_API_KEY=
FINNHUB_TIMEOUT=10
FINNHUB_RATE_LIMIT=60

# CCXT (crypto via Binance by default)
CCXT_DEFAULT_EXCHANGE=coinbase
CCXT_TIMEOUT=10000
CCXT_PROXY=

# Akshare (CN/HK stocks if enabled)
AKSHARE_TIMEOUT=30

# YFinance
YFINANCE_TIMEOUT=30

# Tiingo (optional)
TIINGO_API_KEY=
TIINGO_TIMEOUT=10

# =========================
# Web Search (optional)
# =========================
SEARCH_PROVIDER=google
SEARCH_MAX_RESULTS=10
SEARCH_GOOGLE_API_KEY=
SEARCH_GOOGLE_CX=
SEARCH_BING_API_KEY=

# Internal API key (optional, if you add internal-service auth later)
INTERNAL_API_KEY=

# =========================
# Redis Cache (optional)
# =========================
# 启用Redis缓存 (默认true,如果Redis不可用会自动降级到内存缓存)
REDIS_ENABLED=true

# Redis连接配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# =========================
# HAMA Analysis Scheduler (optional)
# =========================
# 启用HAMA定时任务 (默认true)
HAMA_SCHEDULER_ENABLED=true

# 自动启动定时任务 (默认true)
HAMA_SCHEDULER_AUTO_START=true

# 定时刷新间隔 (分钟,默认5分钟)
HAMA_SCHEDULER_INTERVAL=5

# HAMA缓存过期时间 (秒,默认300秒=5分钟)
HAMA_CACHE_TTL=300

# =========================
# HAMA Brave Browser Monitor (推荐生产环境使用)
# =========================
# 启用Brave浏览器监控 (默认true)
BRAVE_MONITOR_ENABLED=true

# Brave监控缓存过期时间 (秒,默认900秒=15分钟)
# 建议设置比监控间隔长一些，避免数据过期
BRAVE_MONITOR_CACHE_TTL=900

# 自动启动持续监控 (默认false,需要手动启动)
# 设置为true后，后端启动时会自动在后台启动监控线程
BRAVE_MONITOR_AUTO_START=false

# 监控间隔 (秒,默认600秒=10分钟)
# 每隔10分钟自动监控一次所有币种
BRAVE_MONITOR_INTERVAL=600

# 监控币种列表 (逗号分隔,为空时使用默认列表)
# 示例: BTCUSDT,ETHUSDT,BNBUSDT,SOLUSDT,XRPUSDT
BRAVE_MONITOR_SYMBOLS=

# 浏览器类型 (brave/chrome/edge/firefox,默认brave)
# brave: 使用Brave浏览器 (需要安装)
# chrome: 使用Chrome浏览器
# edge: 使用Edge浏览器
# firefox: 使用Firefox浏览器
BRAVE_MONITOR_BROWSER_TYPE=brave

