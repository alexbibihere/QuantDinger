# QuantDinger

> åŸºäºHAMAæŒ‡æ ‡çš„æ™ºèƒ½é‡åŒ–äº¤æ˜“ç›‘æ§ç³»ç»Ÿ

[![Python Version](https://img.shields.io/badge/python-3.11.9-blue.svg)](https://www.python.org/)
[![Node Version](https://img.shields.io/badge/node.js-20.18.0-green.svg)](https://nodejs.org/)
[![Vue Version](https://img.shields.io/badge/vue-2.6.14-brightgreen.svg)](https://vuejs.org/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

## ğŸ“– é¡¹ç›®ç®€ä»‹

QuantDinger æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„é‡åŒ–äº¤æ˜“ç›‘æ§ç³»ç»Ÿï¼Œé›†æˆäº†å¤šé¡¹åˆ›æ–°æŠ€æœ¯ï¼š

- **ğŸ¤– Brave æµè§ˆå™¨è‡ªåŠ¨åŒ–ç›‘æ§**: ä½¿ç”¨ Playwright æ§åˆ¶æµè§ˆå™¨è®¿é—® TradingViewï¼Œé€šè¿‡ RapidOCR æœ¬åœ°è¯†åˆ« HAMA æŒ‡æ ‡
- **ğŸ“Š å¤šç»´åº¦æ•°æ®å±•ç¤º**: Dashboard ä»ªè¡¨ç›˜ã€Kçº¿å›¾è¡¨ã€å®æ—¶ä»·æ ¼æ¨é€
- **âš¡ æ™ºèƒ½ç›‘æ§å¼•æ“**: æ”¯æŒå¹¶å‘ç›‘æ§ã€ç¼“å­˜é¢„çƒ­ã€æ™ºèƒ½é—´éš”è°ƒæ•´
- **ğŸ”” å®æ—¶ä¿¡å·é€šçŸ¥**: HAMA äº¤å‰ä¿¡å·ã€è®¢å•å£°éŸ³æé†’
- **ğŸ¯ å¤šå¸‚åœºæ”¯æŒ**: ç°è´§ã€åˆçº¦å¸‚åœºå…¨è¦†ç›–

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### 1. Brave ç›‘æ§ç³»ç»Ÿ
- âœ… ä½¿ç”¨ Brave æµè§ˆå™¨æ— å¤´æ¨¡å¼è®¿é—® TradingView
- âœ… RapidOCR æœ¬åœ°è¯†åˆ«ï¼Œå®Œå…¨å…è´¹ï¼Œæ— éœ€ API å¯†é’¥
- âœ… æ”¯æŒè‡ªåŠ¨ç™»å½• TradingView è´¦å·
- âœ… SQLite + Redis åŒå±‚ç¼“å­˜
- âœ… å¹¶å‘ç›‘æ§ï¼Œæå‡æ•ˆç‡
- âœ… æ™ºèƒ½ç›‘æ§é—´éš”ï¼ˆæ ¹æ®å¸‚åœºæ´»è·ƒåº¦è°ƒæ•´ï¼‰

### 2. å‰ç«¯åŠŸèƒ½
- ğŸ“ˆ **Dashboard**: KPIæŒ‡æ ‡ã€æ”¶ç›Šæ—¥å†ã€ç­–ç•¥åˆ†å¸ƒã€å›æ’¤æ›²çº¿
- ğŸ¯ **HAMA Market**: å®æ—¶ç›‘æ§ HAMA çŠ¶æ€ï¼Œæ”¯æŒè‡ªåŠ¨åˆ·æ–°
- ğŸ“Š **Smart Monitor**: æ¶¨å¹…æ¦œç›‘æ§ã€HAMA ä¿¡å·æ£€æµ‹
- ğŸ” **TradingView Scanner**: æ¶¨å¹…æ¦œ TOP10ï¼Œå›¾è¡¨æˆªå›¾æ‡’åŠ è½½
- ğŸ“‰ **Indicator Analysis**: Kçº¿å›¾è¡¨ï¼ŒHAMA æŒ‡æ ‡å›æµ‹
- ğŸ¤– **Trading Assistant**: AI å†³ç­–è®°å½•ã€æŒä»“ç®¡ç†

### 3. æŠ€æœ¯äº®ç‚¹
- âš¡ **å®æ—¶æ•°æ®æ¨é€**: WebSocket + SSE
- ğŸ¨ **å¤šä¸»é¢˜æ”¯æŒ**: Lightã€Darkã€RealDark
- ğŸŒ **å›½é™…åŒ–**: æ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢
- ğŸ“± **å“åº”å¼è®¾è®¡**: é€‚é…æ¡Œé¢å’Œç§»åŠ¨ç«¯
- ğŸ” **å®‰å…¨åŠ å¯†**: APIå¯†é’¥åŠ å¯†å­˜å‚¨

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Python**: 3.11.x (æ¨è 3.11.9)
- **Node.js**: 20.x (æ¨è 20.18.0)
- **Brave æµè§ˆå™¨**: æœ€æ–°ç¨³å®šç‰ˆï¼ˆå¯é€‰ï¼‰
- **Redis**: 5.0+ (å¯é€‰)

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/alexbibihere/QuantDinger.git
cd QuantDinger
```

#### 2. åç«¯å®‰è£…

```bash
cd backend_api_python

# å®‰è£… Python ä¾èµ–
pip install -r requirements.txt

# å®‰è£… Playwright æµè§ˆå™¨
playwright install chromium

# (å¯é€‰) å®‰è£… Brave æµè§ˆå™¨
# ä¸‹è½½åœ°å€: https://brave.com/download/
```

#### 3. å‰ç«¯å®‰è£…

```bash
cd quantdinger_vue

# å®‰è£… npm ä¾èµ–
npm install
```

#### 4. é…ç½®æ–‡ä»¶

åˆ›å»ºé…ç½®æ–‡ä»¶ `backend_api_python/.env`:

```env
# Flask é…ç½®
FLASK_APP=run.py
FLASK_ENV=development
SECRET_KEY=your-secret-key

# TradingView é…ç½®
TRADINGVIEW_URL=https://cn.tradingview.com/chart/U1FY2qxO/

# Brave æµè§ˆå™¨è·¯å¾„ (Windows)
BRAVE_PATH=C:\Program Files\BraveSoftware\Brave-Browser\Application\brave.exe

# Redis é…ç½® (å¯é€‰)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# ç›‘æ§é…ç½®
BRAVE_MONITOR_ENABLED=true
HAMA_DEMO_MODE=false
```

é…ç½® TradingView Cookie (å¯é€‰ï¼Œç”¨äºè‡ªåŠ¨ç™»å½•):

åˆ›å»º `backend_api_python/tradingview_cookies.json`:

```json
{
  "cookies": [
    {
      "name": "sessionid",
      "value": "your-cookie-value",
      "domain": ".tradingview.com",
      "path": "/"
    }
  ]
}
```

#### 5. å¯åŠ¨æœåŠ¡

**å¯åŠ¨åç«¯**:

```bash
cd backend_api_python
python run.py
# åç«¯è¿è¡Œåœ¨ http://localhost:5000
```

**å¯åŠ¨å‰ç«¯**:

```bash
cd quantdinger_vue
npm run serve
# å‰ç«¯è¿è¡Œåœ¨ http://localhost:8000
```

#### 6. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:8000

## ğŸ“ é¡¹ç›®ç»“æ„

```
QuantDinger/
â”œâ”€â”€ backend_api_python/          # Python åç«¯
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ routes/             # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ services/           # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ hama_brave_monitor.py      # Brave ç›‘æ§å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ hama_ocr_extractor.py      # OCR æå–å™¨
â”‚   â”‚   â”‚   â””â”€â”€ hama_vision_extractor.py   # è§†è§‰è¯†åˆ«æå–å™¨
â”‚   â”‚   â”œâ”€â”€ models/             # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ data/                   # SQLite æ•°æ®åº“
â”‚   â”œâ”€â”€ screenshots/            # HAMA æˆªå›¾
â”‚   â””â”€â”€ run.py                  # Flask å¯åŠ¨æ–‡ä»¶
â”‚
â”œâ”€â”€ quantdinger_vue/             # Vue å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/              # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/      # ä»ªè¡¨ç›˜
â”‚   â”‚   â”‚   â”œâ”€â”€ hama-market/    # HAMA è¡Œæƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ smart-monitor/  # æ™ºèƒ½ç›‘æ§
â”‚   â”‚   â”‚   â””â”€â”€ tradingview-scanner/  # TV æ‰«æå™¨
â”‚   â”‚   â”œâ”€â”€ components/         # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ mixins/             # Mixins
â”‚   â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ package.json
â”‚
â””â”€â”€ docs/                        # æ–‡æ¡£
    â”œâ”€â”€ README.md               # æ–‡æ¡£ç´¢å¼•
    â”œâ”€â”€ CLAUDE.md               # å‰ç«¯æ¶æ„æ–‡æ¡£
    â”œâ”€â”€ TECH_STACK.md           # æŠ€æœ¯æ ˆæ¸…å•
    â””â”€â”€ BRAVE_MONITOR_LOGIC.md  # Brave ç›‘æ§é€»è¾‘
```

## ğŸ”§ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **Vue 2.6.14** - MVVM æ¡†æ¶
- **Vuex 3.6.2** - çŠ¶æ€ç®¡ç†
- **Vue Router 3.5.3** - è·¯ç”±ç®¡ç†
- **Ant Design Vue 1.7.8** - UI ç»„ä»¶åº“
- **ECharts 6.0.0** - å›¾è¡¨åº“
- **Axios 0.26.1** - HTTP å®¢æˆ·ç«¯

### åç«¯
- **Flask 2.3.3** - Web æ¡†æ¶
- **Playwright 1.40.0** - æµè§ˆå™¨è‡ªåŠ¨åŒ–
- **RapidOCR 1.3.0** - OCR è¯†åˆ«å¼•æ“
- **SQLAlchemy 2.0.0** - ORM
- **APScheduler 3.10.0** - å®šæ—¶ä»»åŠ¡

### æ•°æ®åº“
- **SQLite** - æœ¬åœ°æ•°æ®åº“
- **Redis** - ç¼“å­˜ï¼ˆå¯é€‰ï¼‰

## ğŸ“– æ–‡æ¡£

- ğŸ“– [å‰ç«¯æ¶æ„æ–‡æ¡£](./docs/CLAUDE.md) - å‰ç«¯é¡µé¢æŠ€æœ¯å®ç°
- ğŸ”§ [æŠ€æœ¯æ ˆæ¸…å•](./docs/TECH_STACK.md) - å®Œæ•´ä¾èµ–åˆ—è¡¨
- ğŸ¤– [Brave ç›‘æ§é€»è¾‘](./docs/BRAVE_MONITOR_LOGIC.md) - ç›‘æ§ç³»ç»Ÿè¯¦è§£

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### 1. Brave ç›‘æ§ç³»ç»Ÿ

é€šè¿‡ Brave æµè§ˆå™¨è‡ªåŠ¨è®¿é—® TradingViewï¼Œä½¿ç”¨ RapidOCR è¯†åˆ« HAMA æŒ‡æ ‡ï¼š

```python
from app.services.hama_brave_monitor import get_brave_monitor

# è·å–ç›‘æ§å™¨å®ä¾‹
monitor = get_brave_monitor(use_sqlite=True)

# ç›‘æ§å•ä¸ªå¸ç§
result = monitor.monitor_symbol('BTCUSDT', browser_type='brave')

# æ‰¹é‡å¹¶å‘ç›‘æ§
results = monitor.monitor_batch_parallel(
    symbols=['BTCUSDT', 'ETHUSDT', 'BNBUSDT'],
    max_workers=3
)

# å¯åŠ¨æŒç»­ç›‘æ§
monitor.start_monitoring(
    symbols=['BTCUSDT', 'ETHUSDT'],
    interval=300,  # 5åˆ†é’Ÿ
    browser_type='brave'
)

# å¥åº·æ£€æŸ¥
health = monitor.health_check()
print(health)  # {'status': 'healthy', 'checks': {...}}
```

### 2. HAMA è¡Œæƒ… API

```http
# è·å–ç›‘æ§åˆ—è¡¨
GET /api/hama-market/watchlist?market=spot

# è·å–å•ä¸ªå¸ç§
GET /api/hama-market/symbol?symbol=BTCUSDT&interval=15m

# è·å–ä¿¡å·åˆ—è¡¨
GET /api/hama-market/signals
```

## ğŸ”„ ç›‘æ§æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TradingView    â”‚
â”‚   å›¾è¡¨é¡µé¢      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Playwright è®¿é—®
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Brave Browser  â”‚
â”‚  (æ— å¤´æ¨¡å¼)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ æˆªå– HAMA é¢æ¿
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PNG å›¾ç‰‡       â”‚
â”‚  (æœ¬åœ°æ–‡ä»¶)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ RapidOCR è¯†åˆ«
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OCR æ–‡æœ¬       â”‚
â”‚  (åŸå§‹æ•°æ®)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ è§£ææå–
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HAMA æ•°æ®      â”‚
â”‚  (ç»“æ„åŒ–)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”
         â”‚      â”‚
         â–¼      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SQLite â”‚ â”‚ Redis  â”‚
    â”‚(æŒä¹…åŒ–)â”‚ â”‚ (ç¼“å­˜) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„ç›‘æ§å¸ç§

ç¼–è¾‘ `backend_api_python/app/routes/hama_market.py`:

```python
DEFAULT_SYMBOLS = [
    'BTCUSDT',
    'ETHUSDT',
    'YOURLCOINUSDT',  # æ·»åŠ æ–°å¸ç§
]
```

### è°ƒæ•´ OCR è¯†åˆ«å‚æ•°

ç¼–è¾‘ `backend_api_python/app/services/hama_ocr_extractor.py`:

```python
# æˆªå›¾åŒºåŸŸè°ƒæ•´ (x, y, width, height)
clip = {
    'x': int(page_width * 0.72),
    'y': int(page_height * 0.45),
    'width': int(page_width * 0.28),
    'height': int(page_height * 0.55)
}
```

### è‡ªå®šä¹‰ç›‘æ§é—´éš”

```python
# åŠ¨æ€é—´éš” (æ ¹æ®å¸‚åœºæ´»è·ƒåº¦)
interval = monitor.get_dynamic_interval()  # 300æˆ–600ç§’

# å›ºå®šé—´éš”
monitor.start_monitoring(symbols, interval=600)
```

## ğŸ› æ•…éšœæ’é™¤

### 1. Brave æµè§ˆå™¨æœªæ‰¾åˆ°

```
âš ï¸ æœªæ‰¾åˆ° Brave æµè§ˆå™¨ï¼Œå›é€€åˆ° Chromium
```

**è§£å†³æ–¹æ³•**:
- å®‰è£… Brave æµè§ˆå™¨: https://brave.com/download/
- æˆ–ä¿®æ”¹ `BRAVE_PATH` ç¯å¢ƒå˜é‡

### 2. OCR è¯†åˆ«å¤±è´¥

```
âŒ RapidOCR åˆå§‹åŒ–å¤±è´¥
```

**è§£å†³æ–¹æ³•**:
```bash
pip install rapidocr_onnxruntime
```

### 3. TradingView ç™»å½•å¤±è´¥

```
âš ï¸ è‡ªåŠ¨ç™»å½•å¤±è´¥
```

**è§£å†³æ–¹æ³•**:
1. æ‰‹åŠ¨ç™»å½• TradingView å¹¶å¯¼å‡º Cookie
2. å°† Cookie ä¿å­˜åˆ° `tradingview_cookies.json`
3. æˆ–é…ç½® `file/tradingview.txt` ä¸­çš„è´¦å·å¯†ç 

### 4. SQLite æ•°æ®åº“é”å®š

```
sqlite3.OperationalError: database is locked
```

**è§£å†³æ–¹æ³•**:
- ä»£ç å·²å®ç°æ¯æ¬¡åˆ›å»ºæ–°è¿æ¥
- å¦‚æœä»æœ‰é—®é¢˜ï¼Œé‡å¯åç«¯æœåŠ¡

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å¹¶å‘ç›‘æ§

```python
# ä¸²è¡Œç›‘æ§ (é»˜è®¤)
monitor.monitor_batch(symbols)  # æ…¢

# å¹¶å‘ç›‘æ§ (å¿«3å€)
monitor.monitor_batch_parallel(symbols, max_workers=3)
```

### ç¼“å­˜é¢„çƒ­

```python
# å¯åŠ¨æ—¶é¢„çƒ­çƒ­é—¨å¸ç§
monitor.warmup_cache(hot_symbols=['BTCUSDT', 'ETHUSDT'])
```

### èµ„æºæ¸…ç†

```python
# æ¸…ç†7å¤©å‰çš„æ•°æ®
monitor.cleanup_old_records(days=7)

# æ¸…ç†7å¤©å‰çš„æˆªå›¾
monitor.cleanup_old_screenshots(max_age_days=7)
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0.0 (2026-01-20)
- âœ… æ–°å¢ Brave æµè§ˆå™¨ç›‘æ§ç³»ç»Ÿ
- âœ… é›†æˆ RapidOCR æœ¬åœ°è¯†åˆ«
- âœ… å®ç°å¹¶å‘ç›‘æ§å’Œæ™ºèƒ½é—´éš”
- âœ… æ·»åŠ ç¼“å­˜é¢„çƒ­å’Œå¥åº·æ£€æŸ¥
- âœ… ä¼˜åŒ–å‰ç«¯é¡µé¢æ€§èƒ½
- âœ… å®Œå–„æŠ€æœ¯æ–‡æ¡£

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ

## ğŸ“„ è®¸å¯è¯

[MIT License](LICENSE)

## ğŸ‘¥ ä½œè€…

QuantDinger Team

## ğŸ™ è‡´è°¢

- [TradingView](https://www.tradingview.com/) - å›¾è¡¨å¹³å°
- [Playwright](https://playwright.dev/) - æµè§ˆå™¨è‡ªåŠ¨åŒ–
- [RapidOCR](https://github.com/RapidAI/RapidOCR) - OCR å¼•æ“
- [Ant Design Vue](https://www.antdv.com/) - UI ç»„ä»¶åº“

## ğŸ“® è”ç³»æ–¹å¼

- GitHub Issues: [https://github.com/alexbibihere/QuantDinger/issues](https://github.com/alexbibihere/QuantDinger/issues)
- é‚®ç®±: support@quantdinger.com

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹ä¸ª Starï¼
