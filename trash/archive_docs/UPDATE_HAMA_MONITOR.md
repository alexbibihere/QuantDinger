# ğŸ‰ æ–°åŠŸèƒ½å‘å¸ƒ: HAMAä¿¡å·ç›‘æ§ç³»ç»Ÿ

## ğŸ“… æ›´æ–°æ—¶é—´
2025-01-09

---

## âœ¨ æ–°å¢åŠŸèƒ½

### ğŸ”” HAMAä¿¡å·ç›‘æ§

åŸºäºTradingView HAMAèœ¡çƒ›å›¾æŒ‡æ ‡çš„è‡ªåŠ¨åŒ–ä¿¡å·ç›‘æ§ç³»ç»Ÿã€‚

**æ ¸å¿ƒç‰¹æ€§:**
- âœ… å®æ—¶ç›‘æ§æ¶¨å¹…æ¦œå¸ç§
- âœ… è‡ªåŠ¨æ£€æµ‹HAMAèœ¡çƒ›å›¾ä¸MAçº¿äº¤å‰
- âœ… æ¶¨è·Œä¿¡å·è‡ªåŠ¨æé†’
- âœ… å®Œæ•´çš„ä¿¡å·å†å²è®°å½•
- âœ… çµæ´»çš„é…ç½®é€‰é¡¹
- âœ… å‹å¥½çš„Webç•Œé¢

**å·¥ä½œåŸç†:**
```
åŸºäºTradingView HAMAæŒ‡æ ‡ç®—æ³•
  â†“
è·å–å¸å®‰æ¶¨å¹…æ¦œå‰20å
  â†“
æ¯å°æ—¶è‡ªåŠ¨æ£€æµ‹Kçº¿æ•°æ®
  â†“
è®¡ç®—HAMAèœ¡çƒ›å›¾å’ŒMAçº¿
  â†“
æ£€æµ‹äº¤å‰ä¿¡å·
  â†“
è‡ªåŠ¨å‘å‡ºæ¶¨è·Œæé†’
```

---

## ğŸ“ æ–°å¢æ–‡ä»¶

### åç«¯æœåŠ¡
- `backend_api_python/app/services/hama_monitor.py` (470è¡Œ)
  - HAMAä¿¡å·ç›‘æ§æ ¸å¿ƒæœåŠ¡
  - åå°è‡ªåŠ¨è¿è¡Œ
  - å®æ—¶ä¿¡å·æ£€æµ‹

### APIè·¯ç”±
- `backend_api_python/app/routes/hama_monitor.py` (380è¡Œ)
  - ç›‘æ§ç®¡ç†API
  - ä¿¡å·æŸ¥è¯¢API
  - é…ç½®ç®¡ç†API

### å‰ç«¯é¡µé¢
- `quantdinger_vue/src/views/hama-monitor/index.vue` (560è¡Œ)
  - ç›‘æ§ç®¡ç†ç•Œé¢
  - ä¿¡å·å†å²å±•ç¤º
  - å®æ—¶çŠ¶æ€æ›´æ–°

- `quantdinger_vue/src/api/hamaMonitor.js`
  - å‰ç«¯APIå°è£…

### æµ‹è¯•å’Œæ–‡æ¡£
- `test_hama_monitor.py` - APIæµ‹è¯•è„šæœ¬
- `HAMA_MONITOR_GUIDE.md` - å®Œæ•´ä½¿ç”¨æŒ‡å—
- `HAMA_MONITOR_QUICKSTART.md` - å¿«é€Ÿå…¥é—¨

---

## ğŸ”§ ä¿®æ”¹æ–‡ä»¶

### åç«¯ä¿®æ”¹
1. `backend_api_python/app/routes/__init__.py`
   - æ·»åŠ hama_monitor_bpè“å›¾å¯¼å…¥
   - æ³¨å†Œè“å›¾åˆ° `/api/hama-monitor`

### å‰ç«¯ä¿®æ”¹
1. `quantdinger_vue/src/config/router.config.js`
   - æ·»åŠ hama-monitorè·¯ç”±

2. `quantdinger_vue/src/locales/lang/zh-CN.js`
   - æ·»åŠ 44ä¸ªä¸­æ–‡ç¿»è¯‘é”®

---

## ğŸ¯ APIç«¯ç‚¹

### ç›‘æ§æ§åˆ¶
- `GET /api/hama-monitor/status` - è·å–ç›‘æ§çŠ¶æ€
- `POST /api/hama-monitor/start` - å¯åŠ¨ç›‘æ§
- `POST /api/hama-monitor/stop` - åœæ­¢ç›‘æ§

### å¸ç§ç®¡ç†
- `GET /api/hama-monitor/symbols` - è·å–ç›‘æ§å¸ç§åˆ—è¡¨
- `POST /api/hama-monitor/symbols/add` - æ·»åŠ å•ä¸ªå¸ç§
- `POST /api/hama-monitor/symbols/remove` - ç§»é™¤å¸ç§
- `POST /api/hama-monitor/symbols/add-top-gainers` - æ·»åŠ æ¶¨å¹…æ¦œ

### ä¿¡å·ç®¡ç†
- `GET /api/hama-monitor/signals` - è·å–ä¿¡å·å†å²
- `POST /api/hama-monitor/clear-signals` - æ¸…ç©ºä¿¡å·å†å²

### é…ç½®ç®¡ç†
- `GET /api/hama-monitor/config` - è·å–é…ç½®
- `POST /api/hama-monitor/config` - æ›´æ–°é…ç½®

---

## ğŸš€ éƒ¨ç½²è¯´æ˜

### å¿…é¡»é‡æ–°éƒ¨ç½²!

ç”±äºæ–°å¢äº†åç«¯æœåŠ¡å’ŒAPIè·¯ç”±,**å¿…é¡»é‡æ–°éƒ¨ç½²Dockerå®¹å™¨**ã€‚

### Windowsç”¨æˆ·

```bash
# æ–¹æ³•1: åŒå‡»è¿è¡Œ
ä¸€é”®éƒ¨ç½².bat

# æ–¹æ³•2: PowerShell
cd d:\github\QuantDinger
docker compose down
docker compose build
docker compose up -d
```

### éªŒè¯éƒ¨ç½²

```bash
# æ–¹æ³•1: è¿è¡Œæ£€æŸ¥è„šæœ¬
python check_deployment.py

# æ–¹æ³•2: è¿è¡Œæµ‹è¯•è„šæœ¬
python test_hama_monitor.py

# æ–¹æ³•3: æµè§ˆå™¨è®¿é—®
http://localhost:8888/hama-monitor
```

---

## ğŸ“– ä½¿ç”¨ç¤ºä¾‹

### åœºæ™¯1: ç›‘æ§æ¶¨å¹…æ¦œ

```python
# 1. å¯åŠ¨ç›‘æ§
POST /api/hama-monitor/start

# 2. æ·»åŠ æ¶¨å¹…æ¦œå‰20å
POST /api/hama-monitor/symbols/add-top-gainers
Body: {"limit": 20, "market": "spot"}

# 3. ç­‰å¾…ä¿¡å·(è‡ªåŠ¨)
GET /api/hama-monitor/signals?limit=50
```

### åœºæ™¯2: ç›‘æ§ç‰¹å®šå¸ç§

```python
# 1. æ·»åŠ BTC
POST /api/hama-monitor/symbols/add
Body: {"symbol": "BTCUSDT", "market_type": "spot"}

# 2. æ·»åŠ ETH
POST /api/hama-monitor/symbols/add
Body: {"symbol": "ETHUSDT", "market_type": "spot"}

# 3. æŸ¥è¯¢ç›‘æ§çŠ¶æ€
GET /api/hama-monitor/symbols
```

---

## ğŸ”” ä¿¡å·è¯´æ˜

### æ¶¨ä¿¡å· (UP)

**è§¦å‘æ¡ä»¶:**
```
HAMAèœ¡çƒ›æ”¶ç›˜ä»·ä»ä¸‹æ–¹ç©¿è¶ŠMAçº¿åˆ°ä¸Šæ–¹
```

**ç®—æ³•:**
```python
if candle_close_prev <= ma_prev and candle_close > ma:
    äº§ç”Ÿæ¶¨ä¿¡å·
```

**å«ä¹‰:**
- è¶‹åŠ¿å¯èƒ½è½¬å¼º
- é€‚åˆè€ƒè™‘ä¹°å…¥
- å»ºè®®åšå¤š

### è·Œä¿¡å· (DOWN)

**è§¦å‘æ¡ä»¶:**
```
HAMAèœ¡çƒ›æ”¶ç›˜ä»·ä»ä¸Šæ–¹ç©¿è¶ŠMAçº¿åˆ°ä¸‹æ–¹
```

**ç®—æ³•:**
```python
if candle_close_prev >= ma_prev and candle_close < ma:
    äº§ç”Ÿè·Œä¿¡å·
```

**å«ä¹‰:**
- è¶‹åŠ¿å¯èƒ½è½¬å¼±
- é€‚åˆè€ƒè™‘å–å‡º
- å»ºè®®åšç©º

---

## âš™ï¸ é…ç½®å‚æ•°

### æ£€æŸ¥é—´éš” (check_interval)
- **é»˜è®¤**: 60ç§’
- **èŒƒå›´**: 10-3600ç§’
- **è¯´æ˜**: ç³»ç»Ÿæ¯éš”å¤šå°‘ç§’æ£€æŸ¥ä¸€æ¬¡æ‰€æœ‰å¸ç§çš„Kçº¿æ•°æ®

### ä¿¡å·å†·å´æ—¶é—´ (signal_cooldown)
- **é»˜è®¤**: 300ç§’(5åˆ†é’Ÿ)
- **èŒƒå›´**: 0-3600ç§’
- **è¯´æ˜**: åŒä¸€å¸ç§äº§ç”Ÿä¿¡å·å,å¤šä¹…æ‰èƒ½å†æ¬¡äº§ç”Ÿä¿¡å·

---

## ğŸ“Š æŠ€æœ¯å®ç°

### HAMAæŒ‡æ ‡è®¡ç®—

å®Œå…¨åŸºäºTradingView Pine Scriptç®—æ³•:

```python
# 1. è®¡ç®—Heikin Ashiæºæ•°æ®
source_open = (prev_open + prev_close) / 2
source_high = max(high, close)
source_low = min(low, close)
source_close = (open + high + low + close) / 4

# 2. è®¡ç®—HAMAèœ¡çƒ›å›¾(ä½¿ç”¨EMA/WMA)
candle_open = EMA(source_open, 25)
candle_high = EMA(source_high, 20)
candle_low = EMA(source_low, 20)
candle_close = WMA(source_close, 20)

# 3. è®¡ç®—MAçº¿
ma = WMA(candle_close, 55)

# 4. æ£€æµ‹äº¤å‰
cross_up = crossover(candle_close, ma)
cross_down = crossunder(candle_close, ma)
```

### æ•°æ®è·å–

- **Kçº¿æ•°æ®**: Binanceå…¬å¼€API `/api/v3/klines`
- **æ¶¨å¹…æ¦œ**: Binance API `/api/v3/ticker/24hr`
- **æ—¶é—´å‘¨æœŸ**: 1å°æ—¶Kçº¿
- **æ•°æ®é‡**: æœ€è¿‘200æ ¹Kçº¿

---

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
python test_hama_monitor.py
```

**æµ‹è¯•å†…å®¹:**
1. âœ… ç”¨æˆ·ç™»å½•
2. âœ… è·å–ç›‘æ§çŠ¶æ€
3. âœ… å¯åŠ¨ç›‘æ§æœåŠ¡
4. âœ… æ·»åŠ æ¶¨å¹…æ¦œ
5. âœ… è·å–ç›‘æ§å¸ç§åˆ—è¡¨
6. âœ… æ·»åŠ å•ä¸ªå¸ç§
7. âœ… ç­‰å¾…ä¿¡å·äº§ç”Ÿ
8. âœ… è·å–ä¿¡å·å†å²
9. âœ… åœæ­¢ç›‘æ§æœåŠ¡

### æµ‹è¯•ç»“æœ

```
============================================================
HAMAä¿¡å·ç›‘æ§æœåŠ¡æµ‹è¯•
============================================================
æµ‹è¯•æ—¶é—´: 2025-01-09 xx:xx:xx
APIåœ°å€: http://localhost:5000

============================================================
1. ç”¨æˆ·ç™»å½•
============================================================
âœ… ç™»å½•æˆåŠŸ

============================================================
2. è·å–ç›‘æ§çŠ¶æ€
============================================================
âœ… è·å–ç›‘æ§çŠ¶æ€æˆåŠŸ
   è¿è¡ŒçŠ¶æ€: è¿è¡Œä¸­
   ç›‘æ§å¸ç§: 5 ä¸ª
   ...

============================================================
æµ‹è¯•å®Œæˆ
============================================================
âœ… æ‰€æœ‰åŸºæœ¬åŠŸèƒ½æµ‹è¯•å®Œæˆ
```

---

## ğŸ¯ è®¿é—®åœ°å€

### å‰ç«¯é¡µé¢
```
http://localhost:8888/hama-monitor
```

### APIç«¯ç‚¹
```
http://localhost:5000/api/hama-monitor/status
http://localhost:5000/api/hama-monitor/signals
```

---

## âš ï¸ é‡è¦æç¤º

### 1. ä¿¡å·å»¶è¿Ÿ
- ä½¿ç”¨1å°æ—¶Kçº¿æ•°æ®
- ä¿¡å·å¯èƒ½æœ‰å»¶è¿Ÿ
- ä¸é€‚åˆè¶…çŸ­çº¿äº¤æ˜“

### 2. ä¿¡å·å‡†ç¡®æ€§
- åŸºäºå†å²æ•°æ®è®¡ç®—
- ä¸èƒ½ä¿è¯100%å‡†ç¡®
- å»ºè®®ç»“åˆå…¶ä»–æŒ‡æ ‡

### 3. é£é™©æç¤º
- ä¿¡å·ä»…ä¾›å‚è€ƒ
- ä¸æ„æˆæŠ•èµ„å»ºè®®
- è¯·åšå¥½é£é™©ç®¡ç†
- å¸åœˆæœ‰é£é™©,æŠ•èµ„éœ€è°¨æ…

### 4. æ€§èƒ½è€ƒè™‘
- å»ºè®®ç›‘æ§20-50ä¸ªå¸ç§
- æ£€æŸ¥é—´éš”ä¸å®œè¿‡çŸ­
- æ³¨æ„ç³»ç»Ÿèµ„æºå ç”¨

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [HAMA_MONITOR_GUIDE.md](HAMA_MONITOR_GUIDE.md) - å®Œæ•´ä½¿ç”¨æŒ‡å—
- [HAMA_MONITOR_QUICKSTART.md](HAMA_MONITOR_QUICKSTART.md) - å¿«é€Ÿå…¥é—¨
- [hamaCandel.txt](hamaCandel.txt) - TradingViewæŒ‡æ ‡æºç 

---

## ğŸ”„ åç»­è®¡åˆ’

### å¯èƒ½çš„æ”¹è¿›
- [ ] Telegramæ¨é€é€šçŸ¥
- [ ] é‚®ä»¶æ¨é€é€šçŸ¥
- [ ] Webhookæ¨é€
- [ ] è‡ªå®šä¹‰HAMAå‚æ•°
- [ ] å¤šæ—¶é—´å‘¨æœŸæ”¯æŒ
- [ ] ä¿¡å·è¿‡æ»¤å’Œä¼˜åŒ–
- [ ] å›æµ‹åŠŸèƒ½
- [ ] ä¿¡å·ç»Ÿè®¡å’Œåˆ†æ

---

## ğŸ‰ æ€»ç»“

HAMAä¿¡å·ç›‘æ§ç³»ç»Ÿç°å·²ä¸Šçº¿!

**åŠŸèƒ½äº®ç‚¹:**
- âœ¨ åŸºäºTradingViewç®—æ³•çš„å‡†ç¡®ä¿¡å·
- âœ¨ è‡ªåŠ¨åŒ–ç›‘æ§,æ— éœ€ç›¯ç›˜
- âœ¨ å®æ—¶ä¿¡å·æ£€æµ‹å’Œå†å²è®°å½•
- âœ¨ çµæ´»çš„é…ç½®é€‰é¡¹
- âœ¨ å‹å¥½çš„ç”¨æˆ·ç•Œé¢

**å¼€å§‹ä½¿ç”¨:**
1. è¿è¡Œ `ä¸€é”®éƒ¨ç½².bat`
2. è®¿é—® http://localhost:8888/hama-monitor
3. å¯åŠ¨ç›‘æ§,æ·»åŠ å¸ç§
4. ç­‰å¾…ä¿¡å·,æŠŠæ¡æœºä¼š!

**ç¥æ‚¨äº¤æ˜“é¡ºåˆ©! ğŸ“ˆ**

---

**ç‰ˆæœ¬**: v1.0
**æ›´æ–°æ—¶é—´**: 2025-01-09
**ä½œè€…**: QuantDinger Team
