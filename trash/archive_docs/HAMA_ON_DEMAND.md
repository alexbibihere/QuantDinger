# HAMAæŒ‰éœ€è®¡ç®—åŠŸèƒ½

## åŠŸèƒ½è¯´æ˜

HAMAæŒ‡æ ‡ç°åœ¨æ”¹ä¸º**æŒ‰éœ€è®¡ç®—**æ¨¡å¼ï¼Œä¸å†è‡ªåŠ¨è®¡ç®—æ‰€æœ‰å¸ç§ã€‚åªæœ‰ç”¨æˆ·ç‚¹å‡»æŸä¸ªå¸ç§çš„HAMAæ ‡ç­¾æ—¶ï¼Œæ‰ä¼šè®¡ç®—å¹¶ç¼“å­˜è¯¥å¸ç§çš„HAMAçŠ¶æ€ã€‚

## å®ç°åŸç†

### 1. åç«¯API

**ç«¯ç‚¹**: `POST /api/hama-monitor/calculate`

**è¯·æ±‚ä½“**:
```json
{
  "symbol": "BTCUSDT",
  "market_type": "spot"  // å¯é€‰,é»˜è®¤ spot
}
```

**å“åº”**:
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "symbol": "BTCUSDT",
    "hama_status": {
      "status": "golden_cross",
      "status_text": "é‡‘å‰"
    },
    "ma100": 42500.50,
    "bollinger_bands": {
      "status": "expansion"
    },
    "is_cached": true,
    "timestamp": "2026-01-13T10:30:00"
  }
}
```

### 2. å·¥ä½œæµç¨‹

1. **ç”¨æˆ·ç‚¹å‡»HAMAæ ‡ç­¾**
   - å‰ç«¯å‘é€è¯·æ±‚åˆ°åç«¯
   - æ˜¾ç¤ºloadingå›¾æ ‡

2. **åç«¯è®¡ç®—**
   - è°ƒç”¨HAMAæ··åˆæœåŠ¡è®¡ç®—æŒ‡æ ‡
   - åˆ†æä»·æ ¼ã€MA100ã€å¸ƒæ—å¸¦ç­‰
   - è¿”å›å®Œæ•´ç»“æœ

3. **Redisç¼“å­˜**
   - è®¡ç®—ç»“æœè‡ªåŠ¨ç¼“å­˜åˆ°Redis
   - ç¼“å­˜æ—¶é—´ï¼š5åˆ†é’Ÿï¼ˆ300ç§’ï¼‰
   - ç¼“å­˜é”®ï¼š`hama:analysis:{symbol}`

4. **å‰ç«¯æ˜¾ç¤º**
   - æ›´æ–°HAMAçŠ¶æ€æ˜¾ç¤º
   - æ˜¾ç¤ºè®¡ç®—ç»“æœå’Œç¼“å­˜çŠ¶æ€
   - 5åˆ†é’Ÿå†…å†æ¬¡ç‚¹å‡»ä½¿ç”¨ç¼“å­˜

### 3. ç¼“å­˜ç­–ç•¥

**ç¼“å­˜æ—¶é—´**: 5åˆ†é’Ÿï¼ˆ300ç§’ï¼‰

**ç¼“å­˜é”®**: `hama:analysis:{symbol}`

**ç¼“å­˜éªŒè¯**:
```javascript
// å¦‚æœå·²æœ‰ç¼“å­˜ä¸”æœªè¿‡æœŸ,æç¤ºä½¿ç”¨ç¼“å­˜
if (record.hama_indicator && record.hama_cached) {
  const cachedTime = new Date(record.hama_indicator.timestamp)
  const now = new Date()
  const diffMinutes = (now - cachedTime) / 1000 / 60

  if (diffMinutes < 5) {
    this.$message.info('ä½¿ç”¨ç¼“å­˜çš„HAMAæ•°æ® (5åˆ†é’Ÿæœ‰æ•ˆæœŸ)')
    return
  }
}
```

## å‰ç«¯ä½¿ç”¨

### TradingView Scanneré¡µé¢

åœ¨ **TradingView Scanner** é¡µé¢ï¼ˆ`/tradingview-scanner`ï¼‰ï¼š

1. **æŸ¥çœ‹HAMAçŠ¶æ€åˆ—**
   - é»˜è®¤æ˜¾ç¤º"-"
   - é¼ æ ‡æ‚¬åœæç¤º"ç‚¹å‡»è®¡ç®—HAMAæŒ‡æ ‡"

2. **ç‚¹å‡»HAMAæ ‡ç­¾**
   - ç‚¹å‡»ä»»æ„å¸ç§çš„HAMAæ ‡ç­¾
   - æ˜¾ç¤ºloadingå›¾æ ‡
   - è®¡ç®—å®Œæˆåæ›´æ–°æ˜¾ç¤º

3. **HAMAçŠ¶æ€é¢œè‰²**
   - ğŸŸ¢ ç»¿è‰²ï¼šé‡‘å‰ / ä¹°å…¥ä¿¡å·
   - ğŸ”´ çº¢è‰²ï¼šæ­»å‰ / å–å‡ºä¿¡å·
   - ğŸ”µ è“è‰²ï¼šä¸­æ€§ / è§‚æœ›
   - âšª é»˜è®¤ï¼šæœªè®¡ç®—

### æç¤ºä¿¡æ¯

**æœªè®¡ç®—æ—¶**: "ç‚¹å‡»è®¡ç®—HAMAæŒ‡æ ‡"

**å·²è®¡ç®—æ—¶**:
```
ç‚¹å‡»åˆ·æ–°HAMAæŒ‡æ ‡
æ¥æº: hybrid
è€—æ—¶: 0.35s
ç¼“å­˜: æ˜¯ (5åˆ†é’Ÿæœ‰æ•ˆæœŸ)
çŠ¶æ€: é‡‘å‰
èœ¡çƒ›ä½äºMA100ä¸Šæ–¹
MA100: $42500.50
å¸ƒæ—å¸¦: æ‰©å¼ 
```

## APIè°ƒç”¨ç¤ºä¾‹

### è®¡ç®—å•ä¸ªå¸ç§HAMA

```bash
curl -X POST http://localhost:5000/api/hama-monitor/calculate \
  -H "Content-Type: application/json" \
  -d '{
    "symbol": "BTCUSDT",
    "market_type": "spot"
  }'
```

### å“åº”ç¤ºä¾‹

**æˆåŠŸ**:
```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "symbol": "BTCUSDT",
    "success": true,
    "hama_status": {
      "status": "golden_cross",
      "status_text": "é‡‘å‰",
      "candle_above_ma": true,
      "candle_ma_relation": "èœ¡çƒ›ä½äºMA100ä¸Šæ–¹"
    },
    "ma100": 42500.50,
    "ema20": 43200.30,
    "price": 43500.00,
    "bollinger_bands": {
      "upper": 44000.00,
      "middle": 42500.50,
      "lower": 41000.00,
      "status": "expansion"
    },
    "is_cached": false,
    "timestamp": "2026-01-13T10:30:00",
    "calculation_time": 0.35,
    "source": "hybrid"
  }
}
```

**å¤±è´¥**:
```json
{
  "code": 0,
  "msg": "è®¡ç®—å¤±è´¥: æ— æ³•è·å–Kçº¿æ•°æ®"
}
```

## ä¼˜åŠ¿

### 1. æŒ‰éœ€è®¡ç®—
- âœ… åªè®¡ç®—ç”¨æˆ·éœ€è¦çš„å¸ç§
- âœ… èŠ‚çœè®¡ç®—èµ„æº
- âœ… å‡å°‘APIè°ƒç”¨æ¬¡æ•°

### 2. æ™ºèƒ½ç¼“å­˜
- âœ… 5åˆ†é’Ÿç¼“å­˜æœ‰æ•ˆæœŸ
- âœ… é¿å…é‡å¤è®¡ç®—
- âœ… æå‡å“åº”é€Ÿåº¦

### 3. ç”¨æˆ·ä½“éªŒ
- âœ… ç‚¹å‡»å³ç”¨
- âœ… åŠ è½½çŠ¶æ€æç¤º
- âœ… ç¼“å­˜çŠ¶æ€æ˜¾ç¤º

### 4. æ€§èƒ½ä¼˜åŒ–
- âœ… å‡å°‘æœåŠ¡å™¨è´Ÿè½½
- âœ… é™ä½æ•°æ®åº“æŸ¥è¯¢
- âœ… ä¼˜åŒ–Redisä½¿ç”¨

## æ•°æ®å­˜å‚¨

### Redisç¼“å­˜ç»“æ„

**é”®**: `hama:analysis:{symbol}`

**å€¼** (JSON):
```json
{
  "symbol": "BTCUSDT",
  "hama_status": {
    "status": "golden_cross",
    "status_text": "é‡‘å‰"
  },
  "ma100": 42500.50,
  "is_cached": true,
  "timestamp": "2026-01-13T10:30:00",
  "calculation_time": 0.35
}
```

**è¿‡æœŸæ—¶é—´**: 300ç§’ï¼ˆ5åˆ†é’Ÿï¼‰

## ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šæŸ¥çœ‹å•ä¸ªå¸ç§

1. æ‰“å¼€ TradingView Scanner é¡µé¢
2. æ‰¾åˆ°æ„Ÿå…´è¶£çš„å¸ç§ï¼ˆå¦‚BTCUSDTï¼‰
3. ç‚¹å‡»è¯¥å¸ç§çš„HAMAæ ‡ç­¾
4. ç­‰å¾…è®¡ç®—å®Œæˆï¼ˆçº¦0.3-1ç§’ï¼‰
5. æŸ¥çœ‹HAMAçŠ¶æ€ï¼ˆé‡‘å‰/æ­»å‰/ä¸­æ€§ï¼‰

### åœºæ™¯2ï¼šå¯¹æ¯”å¤šä¸ªå¸ç§

1. ç‚¹å‡»ç¬¬ä¸€ä¸ªå¸ç§çš„HAMAæ ‡ç­¾
2. ç­‰å¾…è®¡ç®—å®Œæˆ
3. ç‚¹å‡»ç¬¬äºŒä¸ªå¸ç§çš„HAMAæ ‡ç­¾
4. å¯¹æ¯”ä¸¤ä¸ªå¸ç§çš„HAMAçŠ¶æ€

### åœºæ™¯3ï¼šåˆ·æ–°æ•°æ®

å¦‚æœæ•°æ®è¶…è¿‡5åˆ†é’Ÿï¼š
1. å†æ¬¡ç‚¹å‡»HAMAæ ‡ç­¾
2. ç³»ç»Ÿè‡ªåŠ¨é‡æ–°è®¡ç®—
3. æ›´æ–°ç¼“å­˜å’Œæ˜¾ç¤º

## æ³¨æ„äº‹é¡¹

1. **ç¼“å­˜æœ‰æ•ˆæœŸ**: 5åˆ†é’Ÿåç¼“å­˜è¿‡æœŸï¼Œéœ€è¦é‡æ–°è®¡ç®—
2. **å¹¶å‘é™åˆ¶**: å»ºè®®ä¸è¦åŒæ—¶ç‚¹å‡»è¿‡å¤šå¸ç§
3. **ç½‘ç»œè¦æ±‚**: éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥è·å–Kçº¿æ•°æ®
4. **è®¡ç®—æ—¶é—´**: é€šå¸¸0.3-1ç§’ï¼Œè§†ç½‘ç»œæƒ…å†µè€Œå®š

## æµ‹è¯•

### æµ‹è¯•å•ä¸ªå¸ç§

```bash
# æµ‹è¯•BTCUSDT
curl -X POST http://localhost:5000/api/hama-monitor/calculate \
  -H "Content-Type: application/json" \
  -d '{"symbol": "BTCUSDT"}'

# æµ‹è¯•ETHUSDT
curl -X POST http://localhost:5000/api/hama-monitor/calculate \
  -H "Content-Type: application/json" \
  -d '{"symbol": "ETHUSDT"}'
```

### éªŒè¯Redisç¼“å­˜

```python
import redis

r = redis.Redis(host='localhost', port=6379, db=0)
key = "hama:analysis:BTCUSDT"
data = r.get(key)
print(data)
```

## æ€»ç»“

HAMAæŒ‰éœ€è®¡ç®—åŠŸèƒ½é€šè¿‡**ç‚¹å‡»è§¦å‘ã€æ™ºèƒ½ç¼“å­˜**çš„æ–¹å¼ï¼Œå®ç°äº†ï¼š

1. âœ… æŒ‰éœ€è®¡ç®—ï¼ŒèŠ‚çœèµ„æº
2. âœ… Redisç¼“å­˜ï¼Œå¿«é€Ÿå“åº”
3. âœ… ç”¨æˆ·å‹å¥½ï¼Œæ“ä½œç®€å•
4. âœ… æ€§èƒ½ä¼˜åŒ–ï¼Œå‡å°‘è´Ÿè½½

ç³»ç»Ÿç°åœ¨åªåœ¨ç”¨æˆ·éœ€è¦æ—¶æ‰è®¡ç®—HAMAæŒ‡æ ‡ï¼Œå¤§å¤§æé«˜äº†èµ„æºåˆ©ç”¨æ•ˆç‡ï¼
