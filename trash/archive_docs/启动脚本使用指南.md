# QuantDinger 一键启动脚本使用指南

## 📁 脚本文件说明

### 主要脚本

| 文件名 | 说明 | 推荐使用 |
|--------|------|---------|
| **快速启动.bat** | 双击即用，快速启动所有服务 | 日常开发 ✅ |
| **start_all.bat** | 显示启动过程，可查看日志 | 首次使用 |
| **start_manager.bat** | 交互式菜单，可选择性启动 | 高级用户 |
| **stop_all.bat** | 停止所有服务 | - |

### 辅助脚本

| 文件名 | 说明 |
|--------|------|
| start_all.sh | Linux/Mac 一键启动脚本 |
| restart_services.bat | 重启所有服务 |

## 🚀 使用方法

### 方法1：快速启动（推荐）

**Windows**:
1. 双击 `快速启动.bat`
2. 等待3秒，自动打开浏览器
3. 访问 http://localhost:8000

**Linux/Mac**:
```bash
chmod +x start_all.sh
./start_all.sh
```

### 方法2：启动管理器（高级功能）

1. 双击 `start_manager.bat`
2. 选择功能：
   - **1** - 启动后端服务
   - **2** - 启动前端服务
   - **3** - 启动所有服务
   - **4** - 启动 HAMA 监控
   - **5** - 测试邮件发送
   - **6** - 查看服务状态

### 方法3：停止所有服务

双击 `stop_all.bat` 停止所有运行中的服务。

## 📋 功能说明

### 启动管理器功能

#### 1. 启动后端服务
- 启动 Flask API 服务器
- 端口: 5000
- 新窗口运行，可查看日志

#### 2. 启动前端服务
- 启动 Vue.js 开发服务器
- 端口: 8000
- 如果依赖未安装会提示

#### 3. 启动所有服务
- 同时启动后端和前端
- 自动等待后端启动完成

#### 4. 启动 HAMA 监控
- 自动监控币种：BTCUSDT, ETHUSDT, BNBUSDT 等
- 每 10 分钟监控一次
- 检测到趋势变化发送邮件
- 收件人：329731984@qq.com

#### 5. 测试邮件发送
- 发送测试邮件到配置的邮箱
- 验证 SMTP 配置是否正确

#### 6. 查看服务状态
- 检查后端、前端、监控是否运行
- 显示服务地址

## 🔧 前置要求

### Windows

1. **Python 3.10+**
   - 下载: https://www.python.org/downloads/
   - 安装时勾选 "Add Python to PATH"

2. **Node.js 16+**
   - 下载: https://nodejs.org/

3. **安装依赖**

```bash
# 后端依赖
cd backend_api_python
pip install -r requirements.txt

# 前端依赖
cd quantdinger_vue
npm install
```

### Linux/Mac

```bash
# 安装 Python 3
sudo apt-get install python3 python3-pip

# 安装 Node.js
sudo apt-get install nodejs npm

# 安装依赖
cd backend_api_python
pip3 install -r requirements.txt

cd ../quantdinger_vue
npm install
```

## 📊 服务地址

启动成功后，可访问：

| 服务 | 地址 | 说明 |
|------|------|------|
| **前端界面** | http://localhost:8000 | Vue.js 应用 |
| **后端API** | http://localhost:5000 | Flask API |
| **健康检查** | http://localhost:5000/api/health | API 状态 |
| **API文档** | http://localhost:5000/api/docs | Swagger 文档 |

## 🐛 常见问题

### 问题1: 端口被占用

**症状**: 启动失败，提示端口已被使用

**解决**:
```bash
# Windows
netstat -ano | findstr :5000
taskkill /PID <PID> /F

# Linux/Mac
lsof -ti:5000 | xargs kill -9
```

### 问题2: Python 未找到

**症状**: 提示 "python 不是内部或外部命令"

**解决**:
1. 重新安装 Python
2. 勾选 "Add Python to PATH"
3. 重启电脑

### 问题3: npm 命令未找到

**症状**: 提示 "npm 不是内部或外部命令"

**解决**:
1. 安装 Node.js: https://nodejs.org/
2. 重启命令行窗口

### 问题4: 前端依赖安装失败

**症状**: npm install 报错

**解决**:
```bash
cd quantdinger_vue
rm -rf node_modules
rm package-lock.json
npm install
```

### 问题5: 后端启动失败

**症状**: Flask 启动报错

**解决**:
```bash
cd backend_api_python
python -m pip install --upgrade pip
pip install -r requirements.txt
```

## 📧 HAMA 监控说明

### 启动监控

使用启动管理器选择 **4** 或运行：
```bash
cd backend_api_python
python auto_hama_monitor_mysql.py
```

### 监控功能

- **监控币种**: BTCUSDT, ETHUSDT, BNBUSDT, SOLUSDT, XRPUSDT, ADAUSDT, DOGEUSDT
- **监控频率**: 每 10 分钟
- **邮件通知**: 检测到趋势变化自动发送邮件
- **收件人**: 329731984@qq.com

### 智能邮件规则

1. ✅ 首次检测到明确趋势 → 发送邮件
2. ❌ 已发送过邮件 → 不再重复发送
3. 🔄 状态变为盘整 → 重置发送状态
4. ⚡ 趋势反转 → 强制发送提醒

## 🔍 查看日志

### 后端日志
```
backend_api_python/logs/app.log
```

### 前端日志
在启动前端的服务窗口中查看

### HAMA 监控日志
在 HAMA 监控窗口中实时显示

## 🎯 快捷操作

### 快速重启

```bash
# 1. 停止所有服务
双击 stop_all.bat

# 2. 重新启动
双击 快速启动.bat
```

### 只启动后端

```bash
cd backend_api_python
python run.py
```

### 只启动前端

```bash
cd quantdinger_vue
npm run serve
```

## 📝 自定义配置

### 修改端口

**后端** (backend_api_python/.env):
```bash
PYTHON_API_PORT=5000  # 修改为其他端口
```

**前端** (quantdinger_vue/vue.config.js):
```javascript
devServer: {
  port: 8000  // 修改为其他端口
}
```

### 修改监控币种

编辑 `backend_api_python/.env`:
```bash
BRAVE_MONITOR_SYMBOLS=BTCUSDT,ETHUSDT,BNBUSDT
```

## 🆘 获取帮助

如遇问题：
1. 查看本文档的常见问题部分
2. 检查服务日志
3. 确认所有依赖已正确安装

---

**祝使用愉快！** 🎉
